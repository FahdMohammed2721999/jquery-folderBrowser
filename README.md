# jquery-folderBrowser-1.0.0-rc
A simple jquery plugin for displaying files and folders on your website.
Author: tom@tea4tom.com
Date: 21/03/2018

REQUIREMENTS:
	jQuery (developed with ver 3.3.1)
	fontAwesome* (developed with ver 5.0.6)

	* fontAwesome used for icons but by using custom classes and graphics you can disregard this
	  dependancy.

![Screenshot](https://raw.githubusercontent.com/tea4tom/jquery-folderBrowser/master/folderBrowser.png)

This is a jquery plugin to enable folder browsing with a similar experience to desktop file managers. In this configuration this class will browse folders on a server based on a root that you specify. The server side script which is used to retrieve directory listings in a array could be modified to return various datasets.

The mark up generated by the folder class is basic HTML dom consisting of a some divs anda ul that contains the current folder contents. All of this is styled with CSS so the output visuals are completely customisable. By default the class will expect FontAwesome to be included but with CSS and changing the defaults this can be customised too. To remove the FontAwesome dependency you need to create a catalog of files icons, create a extension based CSS ruleset and then update the following class options:

var options = {
    icontype: 'i' (type of element to contain your icon)
    foldersclass: 'myFolderIcon' (custom class for icon graphic)
    folderreturnclass: 'myReturnFolder' (custom class for icon graphic)
    filesclass = { 
        star: 'generalFileClass',
        ext: 'specificExtClass', 
        txt: 'specificTxtClass', 
        etc. 
    }
}

Options
-------

A complete list of options are shown below with their respective description.

[rootpath]
Path on server to act as the browsers ROOT, you will not be able to browse to a higher level than this ROOT folder.
[script]
Path on server to the connector script (PHP or similar) that will scan the current location and return a collection of results.
[display]
Denotes the type of display you wan the class to produce. The choices are: "icons", "list", or "detail" with the default being "icons".
[showtoolbar]
If set to true, this property enables the built in tool bar that has some basic folder features.
[icontype]
Type of element you want creating for each icon. The default is "i" but this can be changed to suit custom styling.
[foldersclass]
A valid CSS class for all folders icons.
[folderreturnclass]
A valid CSS class for a special folder that allows a user to navigate back to the previous location.
[filesclass]
This is an array to allow custom icons for various file types. It works by the array key being the files extension and the value is the custom class. The only requirement here for a custom set up is the special key "star" that the plugin applies to all files without a custom icon defined.
eg: { star: 'files-class-all', php: 'files-class-php', etc. }

Events
------

This plugin uses events to help make it easier to drop into any project. Event handlers are defined during the plugin initialisation. A description of available events are below, some of the event functions have arguments that return a file/folder array. If the value is an array it will be this format:

eventArray[] {
name: {file-title / folder-name}
fullpath: {complete path to file}
relpath: {path minus any specified root folder}
type: "file" or "folder"
ext: {file-extension} (files only)
items: {items-in-folder} (folders only)
size: {readable-file-size} (files only)
accessed: {date/time STR} (files only)
modified: {date/time STR} (files only)
changed: {date/time STR} (files only)
ItemSelected(filearr)

If not NULL the filearr will contain details of the selected file or folder. This is files or folders selected by a single click and currently highlighted by the css selector .fbr-selected.
FileDblClick(filearr)
Returns the selected file that the user has double clicked on. The folder plugin takes no action to files double clicked on, you should use this event to "plug-in" to your project.
PathChanged(path)
Returns a string of the current / new absolute path being displayed.
MenuClicked(filearr, path)
Event to launch a context based menu when the options button is clicked. This event carries a filearray for the selected item (or null if nothing selected) and the current path. This feature has been designed to share functionality with custom context menus on pages so that touch devices can still access a custom context.

Methods
-------

folderBrowser.fb_refresh([new_path (optional)], [change_root (optional)])
If you need to interact with javascript after initialisation to update the contents or change the path / 
root programatically you can use this object based method. When you initialise the folderBrowser in your 
element you will need to use a variable to reference the intance later, eg:
  
  var fbrObject;

  function init_classes() {
  	fbrObject = $('#divforfolder').folderBrowser({otions}, ... );
  }

  ...

  function interactWithFBR() {
  	fbrObject.fb_refresh(); // Update the folders data (check for new files etc.)
  	fbrObject.fb_refresh('/some/new/path', true); // Change the path and set the new ROOT folder to that path
  	fbrObject.fb_refresh('/org/path/newfolder/'); // Change path (within root) but leave the root path alone
  }

Basic Example
-------------

This file is in itself a demo / example, right-click and view source to see how the plug-in is integrated and initialised on this page. In it's most simple guise you only need to enter a root folder in the config and specify your event code to initialise the plugin.

<div id="targetElement" style="folderBrowser"></div>
<script>
	$('#targetElement').folderBrowser({
		rootpath: '/home/sites/yoursite/public_html/'
	}, 
	/* event ItemSelected */ 
	function(itm) {
		if(itm===null) {
			console.log('Nothing selected.');
		} else {
			console.log(itm.name + ' selected');
		}
	}, 
	/* event FileDblClick */ 
	function(itm) {
		console.log(itm.name + ' chosen!');
	}, 
	/* event PathChanged */ 
	function(path) {
		console.log('New path: ' + path);
	},
	/* event Menu */ 
	function(selitm, curpath) {
		console.log('Menu clicked: ' + curpath);
		if(selitm!==null) console.log('Menu item: ' + selitm.name);
	});
</script>

Changelog:

o Version 1.0.0-alpha - Original release (folderBrowser.old.js) (t4t)</li>
o Version 1.0.0-rc: (t4t)
   - Re-organise class code layout</li>
   - Bug Fix: Multiple instances on the same page corrupted each other</li>
   - New public method: fb_refresh([newpath optional])
